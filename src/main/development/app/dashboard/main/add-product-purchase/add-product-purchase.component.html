<div class="container new-complaint-form">
    <div class="w-100 text-center">
        <h1>New Product Purchase</h1>
    </div>
    <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
        <eh-alert-error></eh-alert-error>
        <div class="form-row">
            <div class="col">
                <label>Brand*</label>
                <select class="form-control" name="brand" formControlName="brand" (click)="populateProducts()">
                    <option *ngFor="let brand of brands" [value]="brand.id">{{brand.name}}</option>
                </select>
                <div *ngIf="editForm.get('brand') && (editForm.get('brand').dirty || editForm.get('brand').touched)">
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('brand').errors && editForm.get('brand').errors.required">
                        This field is required.
                    </small>
                </div>
            </div>
            <div class="col">
                <label>Product*</label>
                <select class="form-control" name="product" formControlName="product"
                        (ngModelChange)="selectProductCategory()"
                        [disabled]="!products || products.length ===0">
                    <option *ngFor="let product of products" [value]="product.id">{{product.productName}}</option>
                </select>
                <div *ngIf="editForm.get('product') && (editForm.get('product').dirty || editForm.get('product').touched)">
                    <small class="form-text text-danger"
                           *ngIf="editForm.get('product').errors && editForm.get('product').errors.required">
                        This field is required.
                    </small>
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="col">
                <label>Product Category*</label>
                <input disabled type="text" formControlName="productCategory" class="form-control"
                       name="productCategory">
            </div>
            <div class="col">
                <label>User First Name*</label>
                <input type="text" formControlName="userFirstName" class="form-control"
                       name="userFirstName">
            </div>
        </div>
        <div class="form-row">
            <div class="col">
                <label>User Last Name*</label>
                <input type="text" formControlName="userLastName" class="form-control"
                       name="userLastName">
            </div>
            <div class="col">
                <label>User Email*</label>
                <input type="text" formControlName="userEmail" class="form-control"
                       name="userEmail">
            </div>
        </div>
        <div class="form-row">
            <div class="col">
                <label>User Mobile Number*</label>
                <input type="text" formControlName="userMobileNo" class="form-control"
                       name="userMobileNo">
            </div>
            <div class="col">
                <label>User City*</label>
                <select class="form-control" name="userCity" formControlName="userCity"
                        (ngModelChange)="selectProductCategory()"
                        [disabled]="!cities || cities.length ===0">
                    <option *ngFor="let city of cities" [value]="city">{{city}}</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="col">
                <label>User Address*</label>
                <textarea name="userAddress" class="form-control" id="userAddress" cols="61" rows="5"
                          formControlName="userAddress"></textarea>
            </div>
        </div>
        <div class="form-row">
            <div class="col">
                <button type="button" class="btn btn-secondary mr-2" (click)="previousState()">
                <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span>Cancel</span>
            </button>
                <button type="submit" class="btn btn-primary" [disabled]="editForm.invalid || isSaving">Save Product
                    Purchase
                </button>
            </div>
        </div>
    </form>
</div>